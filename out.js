(()=>{var q,h,$,te,x,M,O,ne,P={},F=[],re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function k(n,e){for(var t in e)n[t]=e[t];return n}function H(n){var e=n.parentNode;e&&e.removeChild(n)}function l(n,e,t){var s,o,r,_={};for(r in e)r=="key"?s=e[r]:r=="ref"?o=e[r]:_[r]=e[r];if(arguments.length>2&&(_.children=arguments.length>3?q.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(r in n.defaultProps)_[r]===void 0&&(_[r]=n.defaultProps[r]);return A(n,_,s,o,null)}function A(n,e,t,s,o){var r={type:n,props:e,key:t,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++$};return o==null&&h.vnode!=null&&h.vnode(r),r}function D(n){return n.children}function w(n,e){this.props=n,this.context=e}function S(n,e){if(e==null)return n.__?S(n.__,n.__.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?S(n):null}function W(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return W(n)}}function B(n){(!n.__d&&(n.__d=!0)&&x.push(n)&&!E.__r++||O!==h.debounceRendering)&&((O=h.debounceRendering)||M)(E)}function E(){for(var n;E.__r=x.length;)n=x.sort(function(e,t){return e.__v.__b-t.__v.__b}),x=[],n.some(function(e){var t,s,o,r,_,d;e.__d&&(_=(r=(t=e).__v).__e,(d=t.__P)&&(s=[],(o=k({},r)).__v=r.__v+1,U(d,r,o,t.__n,d.ownerSVGElement!==void 0,r.__h!=null?[_]:null,s,_??S(r),r.__h),Q(s,r),r.__e!=_&&W(r)))})}function G(n,e,t,s,o,r,_,d,c,f){var i,m,p,a,u,N,g,y=s&&s.__k||F,v=y.length;for(t.__k=[],i=0;i<e.length;i++)if((a=t.__k[i]=(a=e[i])==null||typeof a=="boolean"?null:typeof a=="string"||typeof a=="number"||typeof a=="bigint"?A(null,a,null,null,a):Array.isArray(a)?A(D,{children:a},null,null,null):a.__b>0?A(a.type,a.props,a.key,null,a.__v):a)!=null){if(a.__=t,a.__b=t.__b+1,(p=y[i])===null||p&&a.key==p.key&&a.type===p.type)y[i]=void 0;else for(m=0;m<v;m++){if((p=y[m])&&a.key==p.key&&a.type===p.type){y[m]=void 0;break}p=null}U(n,a,p=p||P,o,r,_,d,c,f),u=a.__e,(m=a.ref)&&p.ref!=m&&(g||(g=[]),p.ref&&g.push(p.ref,null,a),g.push(m,a.__c||u,a)),u!=null?(N==null&&(N=u),typeof a.type=="function"&&a.__k===p.__k?a.__d=c=V(a,c,n):c=j(n,a,p,y,u,c),typeof t.type=="function"&&(t.__d=c)):c&&p.__e==c&&c.parentNode!=n&&(c=S(p))}for(t.__e=N,i=v;i--;)y[i]!=null&&(typeof t.type=="function"&&y[i].__e!=null&&y[i].__e==t.__d&&(t.__d=S(s,i+1)),J(y[i],y[i]));if(g)for(i=0;i<g.length;i++)X(g[i],g[++i],g[++i])}function V(n,e,t){for(var s,o=n.__k,r=0;o&&r<o.length;r++)(s=o[r])&&(s.__=n,e=typeof s.type=="function"?V(s,e,t):j(t,s,s,o,s.__e,e));return e}function j(n,e,t,s,o,r){var _,d,c;if(e.__d!==void 0)_=e.__d,e.__d=void 0;else if(t==null||o!=r||o.parentNode==null)e:if(r==null||r.parentNode!==n)n.appendChild(o),_=null;else{for(d=r,c=0;(d=d.nextSibling)&&c<s.length;c+=2)if(d==o)break e;n.insertBefore(o,r),_=r}return _!==void 0?_:o.nextSibling}function oe(n,e,t,s,o){var r;for(r in t)r==="children"||r==="key"||r in e||L(n,r,null,t[r],s);for(r in e)o&&typeof e[r]!="function"||r==="children"||r==="key"||r==="value"||r==="checked"||t[r]===e[r]||L(n,r,e[r],t[r],s)}function Y(n,e,t){e[0]==="-"?n.setProperty(e,t):n[e]=t==null?"":typeof t!="number"||re.test(e)?t:t+"px"}function L(n,e,t,s,o){var r;e:if(e==="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof s=="string"&&(n.style.cssText=s=""),s)for(e in s)t&&e in t||Y(n.style,e,"");if(t)for(e in t)s&&t[e]===s[e]||Y(n.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")r=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+r]=t,t?s||n.addEventListener(e,r?K:z,r):n.removeEventListener(e,r?K:z,r);else if(e!=="dangerouslySetInnerHTML"){if(o)e=e.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t!=null&&(t!==!1||e[0]==="a"&&e[1]==="r")?n.setAttribute(e,t):n.removeAttribute(e))}}function z(n){this.l[n.type+!1](h.event?h.event(n):n)}function K(n){this.l[n.type+!0](h.event?h.event(n):n)}function U(n,e,t,s,o,r,_,d,c){var f,i,m,p,a,u,N,g,y,v,T,b=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(c=t.__h,d=e.__e=t.__e,e.__h=null,r=[d]),(f=h.__b)&&f(e);try{e:if(typeof b=="function"){if(g=e.props,y=(f=b.contextType)&&s[f.__c],v=f?y?y.props.value:f.__:s,t.__c?N=(i=e.__c=t.__c).__=i.__E:("prototype"in b&&b.prototype.render?e.__c=i=new b(g,v):(e.__c=i=new w(g,v),i.constructor=b,i.render=ie),y&&y.sub(i),i.props=g,i.state||(i.state={}),i.context=v,i.__n=s,m=i.__d=!0,i.__h=[]),i.__s==null&&(i.__s=i.state),b.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=k({},i.__s)),k(i.__s,b.getDerivedStateFromProps(g,i.__s))),p=i.props,a=i.state,m)b.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(b.getDerivedStateFromProps==null&&g!==p&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(g,v),!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(g,i.__s,v)===!1||e.__v===t.__v){i.props=g,i.state=i.__s,e.__v!==t.__v&&(i.__d=!1),i.__v=e,e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(C){C&&(C.__=e)}),i.__h.length&&_.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(g,i.__s,v),i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(p,a,u)})}i.context=v,i.props=g,i.state=i.__s,(f=h.__r)&&f(e),i.__d=!1,i.__v=e,i.__P=n,f=i.render(i.props,i.state,i.context),i.state=i.__s,i.getChildContext!=null&&(s=k(k({},s),i.getChildContext())),m||i.getSnapshotBeforeUpdate==null||(u=i.getSnapshotBeforeUpdate(p,a)),T=f!=null&&f.type===D&&f.key==null?f.props.children:f,G(n,Array.isArray(T)?T:[T],e,t,s,o,r,_,d,c),i.base=e.__e,e.__h=null,i.__h.length&&_.push(i),N&&(i.__E=i.__=null),i.__e=!1}else r==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=se(t.__e,e,t,s,o,r,_,c);(f=h.diffed)&&f(e)}catch(C){e.__v=null,(c||r!=null)&&(e.__e=d,e.__h=!!c,r[r.indexOf(d)]=null),h.__e(C,e,t)}}function Q(n,e){h.__c&&h.__c(e,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(s){s.call(t)})}catch(s){h.__e(s,t.__v)}})}function se(n,e,t,s,o,r,_,d){var c,f,i,m=t.props,p=e.props,a=e.type,u=0;if(a==="svg"&&(o=!0),r!=null){for(;u<r.length;u++)if((c=r[u])&&"setAttribute"in c==!!a&&(a?c.localName===a:c.nodeType===3)){n=c,r[u]=null;break}}if(n==null){if(a===null)return document.createTextNode(p);n=o?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a,p.is&&p),r=null,d=!1}if(a===null)m===p||d&&n.data===p||(n.data=p);else{if(r=r&&q.call(n.childNodes),f=(m=t.props||P).dangerouslySetInnerHTML,i=p.dangerouslySetInnerHTML,!d){if(r!=null)for(m={},u=0;u<n.attributes.length;u++)m[n.attributes[u].name]=n.attributes[u].value;(i||f)&&(i&&(f&&i.__html==f.__html||i.__html===n.innerHTML)||(n.innerHTML=i&&i.__html||""))}if(oe(n,p,m,o,d),i)e.__k=[];else if(u=e.props.children,G(n,Array.isArray(u)?u:[u],e,t,s,o&&a!=="foreignObject",r,_,r?r[0]:t.__k&&S(t,0),d),r!=null)for(u=r.length;u--;)r[u]!=null&&H(r[u]);d||("value"in p&&(u=p.value)!==void 0&&(u!==m.value||u!==n.value||a==="progress"&&!u)&&L(n,"value",u,m.value,!1),"checked"in p&&(u=p.checked)!==void 0&&u!==n.checked&&L(n,"checked",u,m.checked,!1))}return n}function X(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(s){h.__e(s,t)}}function J(n,e,t){var s,o;if(h.unmount&&h.unmount(n),(s=n.ref)&&(s.current&&s.current!==n.__e||X(s,null,e)),(s=n.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(r){h.__e(r,e)}s.base=s.__P=null}if(s=n.__k)for(o=0;o<s.length;o++)s[o]&&J(s[o],e,typeof n.type!="function");t||n.__e==null||H(n.__e),n.__e=n.__d=void 0}function ie(n,e,t){return this.constructor(n,t)}function R(n,e,t){var s,o,r;h.__&&h.__(n,e),o=(s=typeof t=="function")?null:t&&t.__k||e.__k,r=[],U(e,n=(!s&&t||e).__k=l(D,null,[n]),o||P,P,e.ownerSVGElement!==void 0,!s&&t?[t]:o?null:e.firstChild?q.call(e.childNodes):null,r,!s&&t?t:o?o.__e:e.firstChild,s),Q(r,n)}q=F.slice,h={__e:function(n,e){for(var t,s,o;e=e.__;)if((t=e.__c)&&!t.__)try{if((s=t.constructor)&&s.getDerivedStateFromError!=null&&(t.setState(s.getDerivedStateFromError(n)),o=t.__d),t.componentDidCatch!=null&&(t.componentDidCatch(n),o=t.__d),o)return t.__E=t}catch(r){n=r}throw n}},$=0,te=function(n){return n!=null&&n.constructor===void 0},w.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=k({},this.state),typeof n=="function"&&(n=n(k({},t),this.props)),n&&k(t,n),n!=null&&this.__v&&(e&&this.__h.push(e),B(this))},w.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),B(this))},w.prototype.render=D,x=[],M=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,E.__r=0,ne=0;var le="https://salty-ocean-46227.herokuapp.com";function ae(n,e){return`https://${n}.fandom.com/wiki/${e}`}var Z=class extends w{constructor(e){super(e);this.state={showRows:!0}}render(){let e=this.props.aside;if(!e)return null;let t=this.props.parser,s=[];if(!!!e.querySelector("figure"))return null;let r=null,_=e.querySelector("h2");_&&(r=l("h2",null,t.text(_)));let d=t.imgsrc(e.querySelector("figure").querySelector("img").src);for(let c of e.querySelectorAll("div.pi-item"))if(c.children.length!==0)if(c.children.length===1)s.push(t.parseNode(c));else if(c.children.length===2){let f=t.parseNode(c.children[0]),i=t.parseNode(c.children[1]);s.push(l("tr",null,l("td",null,f),l("td",null,i)))}else s.push(t.parseNode(c));return l("aside",null,r,l("div",{style:{display:"flex",justifyContent:"center"}},l("img",{src:d})),l("div",{onClick:()=>{this.setState({showRows:!this.state.showRows})}},l("button",null,this.state.showRows?"Hide":"Show")),this.state.showRows?l("table",null,s):null)}};var ee=class{constructor(e,t){this.raw_text=e,this.wiki=t;let s=new DOMParser;this.html=s.parseFromString(e,"text/html"),this.buildingTable=!1}qs(e){return this.html.querySelector(e)}text(e){return e?e.innerText.trim():(console.error("unknown el"),"-")}title(){return this.text(this.qs(".page-header__title"))}imgsrc(e){return e.includes("/revision/")?e.split("/revision/")[0]:e}aside(){let t=this.qs("div.mw-parser-output").querySelector("aside");return l(Z,{aside:t,parser:this})}toc(){let e=this.qs("#toc");if(!e)return null;let t=[],s=(o,r)=>{for(let _ of o.children){let d=_.children[0],c=this.text(d.querySelector(".toctext"));t.push(l("div",{style:{marginLeft:`${20*r}px`}},l("a",{href:`#${encodeURI(c)}`},this.text(d))));let f=_.querySelector("ul");f&&s(f,r+1)}};return s(e.querySelector("ul"),0),l("div",{className:"toc"},t)}stripSuffix(e,t){return e.endsWith(t)?e.slice(0,-t.length):e}parseNode(e){let t=[],s={SMALL:"small",B:"b",I:"i",P:"p",EM:"em",SPAN:"span",THEAD:"thead",TBODY:"tbody",TR:"tr",CENTER:"center",FONT:"font",STRONG:"strong",ASIDE:"aside",SECTION:"section"};for(let o of e.childNodes){if(s[o.nodeName]){let r=`${s[o.nodeName]}`;t.push(l(r,null,this.parseNode(o)));continue}if(o.nodeName==="A"){let r=o.href;if(o.href.startsWith(window.location.origin)){let _=o.href.split("/wiki/")[1];r=`${window.location.origin}/?p=${this.wiki}/${_}`}t.push(l("a",{href:r},this.parseNode(o)))}else if(o.nodeName==="#text"){let r=o.textContent.trim()==="";(!r||r&&!this.buildingTable)&&t.push(l("span",null,o.textContent))}else if(o.nodeName!=="SUP")if(o.nodeName==="BR")t.push(l("br",null));else if(o.nodeName==="DL")t.push(this.blockquoteFromDl(o));else if(o.nodeName==="H2"){let r=this.stripSuffix(this.text(o),"[]");t.push(l("h2",{id:encodeURI(r)},r))}else if(o.nodeName==="H3"){let r=this.stripSuffix(this.text(o),"[]");t.push(l("h3",{id:encodeURI(r)},r))}else if(o.nodeName==="H4"){let r=this.stripSuffix(this.text(o),"[]");t.push(l("h4",{id:encodeURI(r)},r))}else if(o.nodeName==="BLOCKQUOTE"){let r=o.querySelector("i"),_=null;if(r){_=this.parseNode(r);let d=o.querySelector("cite"),c=null;d&&(c=l("cite",null,l("small",null,this.parseNode(d)))),t.push(l("blockquote",null,_,c))}else t.push(l("blockquote",null,this.parseNode(o)))}else if(o.nodeName==="DIV"){let r=o.querySelector("dl");r?t.push(this.blockquoteFromDl(r)):o.id==="ma-article-type"?t.push(l("p",{className:"article-type"},this.parseNode(o))):t.push(l("p",null,this.parseNode(o)))}else if(o.nodeName==="FIGURE"){let r=o.querySelector("a").href.split("/revision/")[0],_=this.text(o.querySelector("figcaption"));t.push(l("figure",null,l("img",{src:r}),l("figcaption",null,l("span",null,_))))}else if(o.nodeName==="UL")t.push(this.parseList(o,"ul"));else if(o.nodeName==="OL")t.push(this.parseList(o,"ol"));else if(o.nodeName==="IMG"){let r=o.getAttribute("data-src"),_=o.src;r&&(_=o.getAttribute("data-src")),t.push(l("img",{src:this.imgsrc(_)}))}else o.nodeName==="TD"?t.push(this.parseTableCell(o,"td")):o.nodeName==="TH"?t.push(this.parseTableCell(o,"th")):o.nodeName==="TABLE"?(this.buildingTable=!0,t.push(l("table",null,this.parseNode(o))),this.buildingTable=!1):o.nodeName==="NOSCRIPT"||(console.log("Unknown node:",o.nodeName),t.push(l("span",null,o.innerText)))}return t}parseTableCell(e,t){return l(t,{style:{background:e.style.background},rowspan:e.getAttribute("rowspan"),colspan:e.getAttribute("colspan")},this.parseNode(e))}parseList(e,t){let s=t,o=[];for(let r of e.querySelectorAll("li"))o.push(l("li",null,this.parseNode(r)));return l(s,null,o)}blockquoteFromDl(e){let t=this.parseNode(e.children[0]),s=null;return e.children[1]&&(s=l("cite",null,this.parseNode(e.children[1]))),l("blockquote",null,t,s)}sections(){let e=this.qs("div.mw-parser-output"),t=!1,s=[];e.querySelector("#toc")||(t=!0);let o=[];for(let r of e.children)t&&o.push(r),r.id==="toc"&&(t=!0);return l("div",{className:"sections"},this.parseNode({childNodes:o}))}headParagraphs(){let e=this.qs("div.mw-parser-output");if(!e.querySelector("#toc"))return null;let t=[];for(let o of Array.from(e.childNodes)){if(o.id==="toc")break;o.nodeName==="ASIDE"||o.nodeName==="DIV"&&o.querySelector("aside")||(o.nodeName!=="DL",t.push(o))}let s=this.parseNode({childNodes:t});return l("div",null,s)}},I=class extends w{constructor(e){super(e)}componentDidMount(){this.update()}async update(){let e=ae(this.props.wiki,this.props.page),s=await(await fetch(`${le}/${e}`)).text();this.setState({parser:new ee(s,this.props.wiki)})}render(){return this.state.parser?(document.title=this.state.parser.title(),l("div",null,l("a",{href:origin},"origin"),l("h1",null,this.state.parser.title()),l("p",null,this.state.parser.aside()),l("p",null,this.state.parser.headParagraphs()),l("p",null,this.state.parser.toc()),l("p",null,this.state.parser.sections()))):null}};async function _e(){let n=new URL(window.location.href),e=n.searchParams.get("p"),t=null,s=null;if(e){let r=e.split("/");if(r=r.map(_=>_.trim()).filter(_=>_!=""),r.length!=2){alert(`Expected to parts to the path: <wiki>/<page>, instead found ${r}`);return}[t,s]=r}else s=n.pathname.split("/").slice(-1)[0],t=n.pathname.split("https://")[1].split(".")[0];R(l("div",null,"Loading '",s,"' from '",t,"'"),document.body),R(l(I,{wiki:t,page:s}),document.body),sessionStorage[s]&&window.scrollTo(0,sessionStorage[s]),window.onscroll=()=>{sessionStorage[s]=window.scrollY}}_e();})();
