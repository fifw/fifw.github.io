(()=>{var q,h,$,ee,T,I,H,te,L={},M=[],ne=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function x(t,e){for(var n in e)t[n]=e[n];return t}function W(t){var e=t.parentNode;e&&e.removeChild(t)}function _(t,e,n){var r,s,o,c={};for(o in e)o=="key"?r=e[o]:o=="ref"?s=e[o]:c[o]=e[o];if(arguments.length>2&&(c.children=arguments.length>3?q.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)c[o]===void 0&&(c[o]=t.defaultProps[o]);return N(t,c,r,s,null)}function N(t,e,n,r,s){var o={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s??++$};return s==null&&h.vnode!=null&&h.vnode(o),o}function P(t){return t.children}function b(t,e){this.props=t,this.context=e}function S(t,e){if(e==null)return t.__?S(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?S(t):null}function F(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return F(t)}}function O(t){(!t.__d&&(t.__d=!0)&&T.push(t)&&!U.__r++||H!==h.debounceRendering)&&((H=h.debounceRendering)||I)(U)}function U(){for(var t;U.__r=T.length;)t=T.sort(function(e,n){return e.__v.__b-n.__v.__b}),T=[],t.some(function(e){var n,r,s,o,c,a;e.__d&&(c=(o=(n=e).__v).__e,(a=n.__P)&&(r=[],(s=x({},o)).__v=o.__v+1,R(a,o,s,n.__n,a.ownerSVGElement!==void 0,o.__h!=null?[c]:null,r,c??S(o),o.__h),K(r,o),o.__e!=c&&F(o)))})}function B(t,e,n,r,s,o,c,a,u,d){var i,m,p,l,f,w,v,y=r&&r.__k||M,g=y.length;for(n.__k=[],i=0;i<e.length;i++)if((l=n.__k[i]=(l=e[i])==null||typeof l=="boolean"?null:typeof l=="string"||typeof l=="number"||typeof l=="bigint"?N(null,l,null,null,l):Array.isArray(l)?N(P,{children:l},null,null,null):l.__b>0?N(l.type,l.props,l.key,null,l.__v):l)!=null){if(l.__=n,l.__b=n.__b+1,(p=y[i])===null||p&&l.key==p.key&&l.type===p.type)y[i]=void 0;else for(m=0;m<g;m++){if((p=y[m])&&l.key==p.key&&l.type===p.type){y[m]=void 0;break}p=null}R(t,l,p=p||L,s,o,c,a,u,d),f=l.__e,(m=l.ref)&&p.ref!=m&&(v||(v=[]),p.ref&&v.push(p.ref,null,l),v.push(m,l.__c||f,l)),f!=null?(w==null&&(w=f),typeof l.type=="function"&&l.__k===p.__k?l.__d=u=V(l,u,t):u=G(t,l,p,y,f,u),typeof n.type=="function"&&(n.__d=u)):u&&p.__e==u&&u.parentNode!=t&&(u=S(p))}for(n.__e=w,i=g;i--;)y[i]!=null&&(typeof n.type=="function"&&y[i].__e!=null&&y[i].__e==n.__d&&(n.__d=S(r,i+1)),X(y[i],y[i]));if(v)for(i=0;i<v.length;i++)Q(v[i],v[++i],v[++i])}function V(t,e,n){for(var r,s=t.__k,o=0;s&&o<s.length;o++)(r=s[o])&&(r.__=t,e=typeof r.type=="function"?V(r,e,n):G(n,r,r,s,r.__e,e));return e}function G(t,e,n,r,s,o){var c,a,u;if(e.__d!==void 0)c=e.__d,e.__d=void 0;else if(n==null||s!=o||s.parentNode==null)e:if(o==null||o.parentNode!==t)t.appendChild(s),c=null;else{for(a=o,u=0;(a=a.nextSibling)&&u<r.length;u+=2)if(a==s)break e;t.insertBefore(s,o),c=o}return c!==void 0?c:s.nextSibling}function re(t,e,n,r,s){var o;for(o in n)o==="children"||o==="key"||o in e||E(t,o,null,n[o],r);for(o in e)s&&typeof e[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||n[o]===e[o]||E(t,o,e[o],n[o],r)}function j(t,e,n){e[0]==="-"?t.setProperty(e,n):t[e]=n==null?"":typeof n!="number"||ne.test(e)?n:n+"px"}function E(t,e,n,r,s){var o;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||j(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||j(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?r||t.addEventListener(e,o?Y:z,o):t.removeEventListener(e,o?Y:z,o);else if(e!=="dangerouslySetInnerHTML"){if(s)e=e.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||e[0]==="a"&&e[1]==="r")?t.setAttribute(e,n):t.removeAttribute(e))}}function z(t){this.l[t.type+!1](h.event?h.event(t):t)}function Y(t){this.l[t.type+!0](h.event?h.event(t):t)}function R(t,e,n,r,s,o,c,a,u){var d,i,m,p,l,f,w,v,y,g,A,k=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(u=n.__h,a=e.__e=n.__e,e.__h=null,o=[a]),(d=h.__b)&&d(e);try{e:if(typeof k=="function"){if(v=e.props,y=(d=k.contextType)&&r[d.__c],g=d?y?y.props.value:d.__:r,n.__c?w=(i=e.__c=n.__c).__=i.__E:("prototype"in k&&k.prototype.render?e.__c=i=new k(v,g):(e.__c=i=new b(v,g),i.constructor=k,i.render=ie),y&&y.sub(i),i.props=v,i.state||(i.state={}),i.context=g,i.__n=r,m=i.__d=!0,i.__h=[]),i.__s==null&&(i.__s=i.state),k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=x({},i.__s)),x(i.__s,k.getDerivedStateFromProps(v,i.__s))),p=i.props,l=i.state,m)k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(k.getDerivedStateFromProps==null&&v!==p&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(v,g),!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(v,i.__s,g)===!1||e.__v===n.__v){i.props=v,i.state=i.__s,e.__v!==n.__v&&(i.__d=!1),i.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(C){C&&(C.__=e)}),i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(v,i.__s,g),i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(p,l,f)})}i.context=g,i.props=v,i.state=i.__s,(d=h.__r)&&d(e),i.__d=!1,i.__v=e,i.__P=t,d=i.render(i.props,i.state,i.context),i.state=i.__s,i.getChildContext!=null&&(r=x(x({},r),i.getChildContext())),m||i.getSnapshotBeforeUpdate==null||(f=i.getSnapshotBeforeUpdate(p,l)),A=d!=null&&d.type===P&&d.key==null?d.props.children:d,B(t,Array.isArray(A)?A:[A],e,n,r,s,o,c,a,u),i.base=e.__e,e.__h=null,i.__h.length&&c.push(i),w&&(i.__E=i.__=null),i.__e=!1}else o==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=oe(n.__e,e,n,r,s,o,c,u);(d=h.diffed)&&d(e)}catch(C){e.__v=null,(u||o!=null)&&(e.__e=a,e.__h=!!u,o[o.indexOf(a)]=null),h.__e(C,e,n)}}function K(t,e){h.__c&&h.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(r){r.call(n)})}catch(r){h.__e(r,n.__v)}})}function oe(t,e,n,r,s,o,c,a){var u,d,i,m=n.props,p=e.props,l=e.type,f=0;if(l==="svg"&&(s=!0),o!=null){for(;f<o.length;f++)if((u=o[f])&&"setAttribute"in u==!!l&&(l?u.localName===l:u.nodeType===3)){t=u,o[f]=null;break}}if(t==null){if(l===null)return document.createTextNode(p);t=s?document.createElementNS("http://www.w3.org/2000/svg",l):document.createElement(l,p.is&&p),o=null,a=!1}if(l===null)m===p||a&&t.data===p||(t.data=p);else{if(o=o&&q.call(t.childNodes),d=(m=n.props||L).dangerouslySetInnerHTML,i=p.dangerouslySetInnerHTML,!a){if(o!=null)for(m={},f=0;f<t.attributes.length;f++)m[t.attributes[f].name]=t.attributes[f].value;(i||d)&&(i&&(d&&i.__html==d.__html||i.__html===t.innerHTML)||(t.innerHTML=i&&i.__html||""))}if(re(t,p,m,s,a),i)e.__k=[];else if(f=e.props.children,B(t,Array.isArray(f)?f:[f],e,n,r,s&&l!=="foreignObject",o,c,o?o[0]:n.__k&&S(n,0),a),o!=null)for(f=o.length;f--;)o[f]!=null&&W(o[f]);a||("value"in p&&(f=p.value)!==void 0&&(f!==m.value||f!==t.value||l==="progress"&&!f)&&E(t,"value",f,m.value,!1),"checked"in p&&(f=p.checked)!==void 0&&f!==t.checked&&E(t,"checked",f,m.checked,!1))}return t}function Q(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(r){h.__e(r,n)}}function X(t,e,n){var r,s;if(h.unmount&&h.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||Q(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){h.__e(o,e)}r.base=r.__P=null}if(r=t.__k)for(s=0;s<r.length;s++)r[s]&&X(r[s],e,typeof t.type!="function");n||t.__e==null||W(t.__e),t.__e=t.__d=void 0}function ie(t,e,n){return this.constructor(t,n)}function D(t,e,n){var r,s,o;h.__&&h.__(t,e),s=(r=typeof n=="function")?null:n&&n.__k||e.__k,o=[],R(e,t=(!r&&n||e).__k=_(P,null,[t]),s||L,L,e.ownerSVGElement!==void 0,!r&&n?[n]:s?null:e.firstChild?q.call(e.childNodes):null,o,!r&&n?n:s?s.__e:e.firstChild,r),K(o,t)}q=M.slice,h={__e:function(t,e){for(var n,r,s;e=e.__;)if((n=e.__c)&&!n.__)try{if((r=n.constructor)&&r.getDerivedStateFromError!=null&&(n.setState(r.getDerivedStateFromError(t)),s=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(t),s=n.__d),s)return n.__E=n}catch(o){t=o}throw t}},$=0,ee=function(t){return t!=null&&t.constructor===void 0},b.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=x({},this.state),typeof t=="function"&&(t=t(x({},n),this.props)),t&&x(n,t),t!=null&&this.__v&&(e&&this.__h.push(e),O(this))},b.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),O(this))},b.prototype.render=P,T=[],I=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,U.__r=0,te=0;var se="https://salty-ocean-46227.herokuapp.com";function le(t,e){return`https://${t}.fandom.com/wiki/${e}`}var J=class extends b{constructor(e){super(e);this.state={showRows:!1}}render(){let e=this.props.aside;if(!e)return null;let n=this.props.parser,r=[];if(!!!e.querySelector("figure"))return null;let o=n.text(e.querySelector("h2")),c=n.imgsrc(e.querySelector("figure").querySelector("img").src);for(let a of e.querySelectorAll("div.pi-item")){let u=n.extractTextAndLinks(a.children[0]),d=n.extractTextAndLinks(a.children[1]);r.push(_("tr",null,_("td",null,u),_("td",null,d)))}return _("aside",null,_("h2",null,o),_("div",null,_("img",{src:c})),_("div",{onClick:()=>{this.setState({showRows:!this.state.showRows})}},_("button",null,this.state.showRows?"Hide":"Show")),this.state.showRows?_("table",null,r):null)}},Z=class{constructor(e,n){this.raw_text=e,this.wiki=n;let r=new DOMParser;this.html=r.parseFromString(e,"text/html")}qs(e){return this.html.querySelector(e)}text(e){return e?e.innerText.trim():(console.error("unknown el"),"-")}title(){return this.text(this.qs(".page-header__title"))}imgsrc(e){return e.split("/revision/")[0]}aside(){let n=this.qs("div.mw-parser-output").querySelector("aside");return _(J,{aside:n,parser:this})}toc(){let e=this.qs("#toc");if(!e)return null;let n=[],r=(s,o)=>{for(let c of s.children){let a=c.children[0],u=this.text(a.querySelector(".toctext"));n.push(_("div",{style:{marginLeft:`${20*o}px`}},_("a",{href:`#${encodeURI(u)}`},this.text(a))));let d=c.querySelector("ul");d&&r(d,o+1)}};return r(e.querySelector("ul"),0),_("div",{className:"toc"},n)}extractTextAndLinks(e){let n=[];for(let r of e.childNodes)if(r.nodeName==="A"){let s=r.href;if(r.href.startsWith(window.location.origin)){let o=r.href.split("/wiki/")[1];s=`${window.location.origin}/?p=${this.wiki}/${o}`}n.push(_("a",{href:s},r.innerText))}else r.nodeName==="#text"?n.push(_("span",null,r.textContent)):r.nodeName==="SUP"||(r.nodeName==="B"?n.push(_("b",null,this.extractTextAndLinks(r))):r.nodeName==="I"?n.push(_("i",null,this.extractTextAndLinks(r))):r.nodeName==="BR"?n.push(_("br",null)):n.push(_("span",null,r.innerText)));return n}sections(){let e=this.qs("div.mw-parser-output"),n=!1,r=[];e.querySelector("#toc")||(n=!0);for(let s of e.children){if(n)if(s.tagName==="H2"){let o=this.text(s);r.push(_("h2",{id:encodeURI(o)},o))}else if(s.tagName==="H3"){let o=this.text(s);r.push(_("h3",{id:encodeURI(o)},o))}else if(s.tagName==="H4"){let o=this.text(s);r.push(_("h4",{id:encodeURI(o)},o))}else if(s.tagName==="BLOCKQUOTE"){let o=this.extractTextAndLinks(s.querySelector("i")),c=this.extractTextAndLinks(s.querySelector("cite").querySelector("i"));r.push(_("blockquote",null,o,_("cite",null," \u2014 ",c)))}else if(s.tagName==="DIV"){let o=s.querySelector("dl");if(o){let c=this.extractTextAndLinks(o.children[0]),a=this.extractTextAndLinks(o.children[1]);r.push(_("blockquote",null,c,_("cite",null,a)))}else r.push(_("p",null,this.extractTextAndLinks(s)))}else if(s.tagName==="FIGURE"){let o=s.querySelector("a").href.split("/revision/")[0],c=this.text(s.querySelector("figcaption"));r.push(_("figure",null,_("img",{src:o}),_("figcaption",null,_("span",null,c))))}else if(s.tagName==="UL"){let o=[];for(let c of s.querySelectorAll("li"))o.push(_("li",null,this.extractTextAndLinks(c)));r.push(_("ul",null,o))}else r.push(_("p",null,this.extractTextAndLinks(s)));s.id==="toc"&&(n=!0)}return r}headParagraphs(){let e=this.qs("div.mw-parser-output");if(!e.querySelector("#toc"))return null;let n=[];for(let r of Array.from(e.children))if(r.tagName==="P"&&n.push(r),r.id==="toc")break;return n=n.filter(r=>r.innerText.trim()!==""),n=n.map(r=>_("p",null,this.extractTextAndLinks(r))),_("div",null,n)}};async function _e(){let t=new URL(window.location.href),e=t.searchParams.get("p"),n=null,r=null;if(e){let u=e.split("/");if(u=u.map(d=>d.trim()).filter(d=>d!=""),u.length!=2){alert(`Expected to parts to the path: <wiki>/<page>, instead found ${u}`);return}[n,r]=u}else r=t.pathname.split("/").slice(-1)[0],n=t.pathname.split("https://")[1].split(".")[0];D(_("div",null,"Loading '",r,"' from '",n,"'"),document.body);let s=le(n,r),c=await(await fetch(`${se}/${s}`)).text(),a=new Z(c,n);document.title=a.title(),D(_("div",null,_("a",{href:s},"origin"),_("h1",null,a.title()),_("p",null,a.aside()),_("p",null,a.headParagraphs()),_("p",null,a.toc()),_("p",null,a.sections())),document.body),sessionStorage[r]&&window.scrollTo(0,sessionStorage[r]),window.onscroll=()=>{sessionStorage[r]=window.scrollY}}_e();})();
