(()=>{var q,h,I,ee,x,$,O,te,P={},F=[],ne=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function k(n,e){for(var t in e)n[t]=e[t];return n}function H(n){var e=n.parentNode;e&&e.removeChild(n)}function _(n,e,t){var i,r,o,c={};for(o in e)o=="key"?i=e[o]:o=="ref"?r=e[o]:c[o]=e[o];if(arguments.length>2&&(c.children=arguments.length>3?q.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)c[o]===void 0&&(c[o]=n.defaultProps[o]);return A(n,c,i,r,null)}function A(n,e,t,i,r){var o={type:n,props:e,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r??++I};return r==null&&h.vnode!=null&&h.vnode(o),o}function D(n){return n.children}function N(n,e){this.props=n,this.context=e}function S(n,e){if(e==null)return n.__?S(n.__,n.__.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?S(n):null}function M(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return M(n)}}function W(n){(!n.__d&&(n.__d=!0)&&x.push(n)&&!E.__r++||O!==h.debounceRendering)&&((O=h.debounceRendering)||$)(E)}function E(){for(var n;E.__r=x.length;)n=x.sort(function(e,t){return e.__v.__b-t.__v.__b}),x=[],n.some(function(e){var t,i,r,o,c,a;e.__d&&(c=(o=(t=e).__v).__e,(a=t.__P)&&(i=[],(r=k({},o)).__v=o.__v+1,U(a,o,r,t.__n,a.ownerSVGElement!==void 0,o.__h!=null?[c]:null,i,c??S(o),o.__h),K(i,o),o.__e!=c&&M(o)))})}function B(n,e,t,i,r,o,c,a,u,f){var s,m,p,l,d,w,y,v=i&&i.__k||F,g=v.length;for(t.__k=[],s=0;s<e.length;s++)if((l=t.__k[s]=(l=e[s])==null||typeof l=="boolean"?null:typeof l=="string"||typeof l=="number"||typeof l=="bigint"?A(null,l,null,null,l):Array.isArray(l)?A(D,{children:l},null,null,null):l.__b>0?A(l.type,l.props,l.key,null,l.__v):l)!=null){if(l.__=t,l.__b=t.__b+1,(p=v[s])===null||p&&l.key==p.key&&l.type===p.type)v[s]=void 0;else for(m=0;m<g;m++){if((p=v[m])&&l.key==p.key&&l.type===p.type){v[m]=void 0;break}p=null}U(n,l,p=p||P,r,o,c,a,u,f),d=l.__e,(m=l.ref)&&p.ref!=m&&(y||(y=[]),p.ref&&y.push(p.ref,null,l),y.push(m,l.__c||d,l)),d!=null?(w==null&&(w=d),typeof l.type=="function"&&l.__k===p.__k?l.__d=u=G(l,u,n):u=V(n,l,p,v,d,u),typeof t.type=="function"&&(t.__d=u)):u&&p.__e==u&&u.parentNode!=n&&(u=S(p))}for(t.__e=w,s=g;s--;)v[s]!=null&&(typeof t.type=="function"&&v[s].__e!=null&&v[s].__e==t.__d&&(t.__d=S(i,s+1)),X(v[s],v[s]));if(y)for(s=0;s<y.length;s++)Q(y[s],y[++s],y[++s])}function G(n,e,t){for(var i,r=n.__k,o=0;r&&o<r.length;o++)(i=r[o])&&(i.__=n,e=typeof i.type=="function"?G(i,e,t):V(t,i,i,r,i.__e,e));return e}function V(n,e,t,i,r,o){var c,a,u;if(e.__d!==void 0)c=e.__d,e.__d=void 0;else if(t==null||r!=o||r.parentNode==null)e:if(o==null||o.parentNode!==n)n.appendChild(r),c=null;else{for(a=o,u=0;(a=a.nextSibling)&&u<i.length;u+=2)if(a==r)break e;n.insertBefore(r,o),c=o}return c!==void 0?c:r.nextSibling}function oe(n,e,t,i,r){var o;for(o in t)o==="children"||o==="key"||o in e||L(n,o,null,t[o],i);for(o in e)r&&typeof e[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||t[o]===e[o]||L(n,o,e[o],t[o],i)}function Y(n,e,t){e[0]==="-"?n.setProperty(e,t):n[e]=t==null?"":typeof t!="number"||ne.test(e)?t:t+"px"}function L(n,e,t,i,r){var o;e:if(e==="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)t&&e in t||Y(n.style,e,"");if(t)for(e in t)i&&t[e]===i[e]||Y(n.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=t,t?i||n.addEventListener(e,o?z:j,o):n.removeEventListener(e,o?z:j,o);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t!=null&&(t!==!1||e[0]==="a"&&e[1]==="r")?n.setAttribute(e,t):n.removeAttribute(e))}}function j(n){this.l[n.type+!1](h.event?h.event(n):n)}function z(n){this.l[n.type+!0](h.event?h.event(n):n)}function U(n,e,t,i,r,o,c,a,u){var f,s,m,p,l,d,w,y,v,g,T,b=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(u=t.__h,a=e.__e=t.__e,e.__h=null,o=[a]),(f=h.__b)&&f(e);try{e:if(typeof b=="function"){if(y=e.props,v=(f=b.contextType)&&i[f.__c],g=f?v?v.props.value:f.__:i,t.__c?w=(s=e.__c=t.__c).__=s.__E:("prototype"in b&&b.prototype.render?e.__c=s=new b(y,g):(e.__c=s=new N(y,g),s.constructor=b,s.render=se),v&&v.sub(s),s.props=y,s.state||(s.state={}),s.context=g,s.__n=i,m=s.__d=!0,s.__h=[]),s.__s==null&&(s.__s=s.state),b.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=k({},s.__s)),k(s.__s,b.getDerivedStateFromProps(y,s.__s))),p=s.props,l=s.state,m)b.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(b.getDerivedStateFromProps==null&&y!==p&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(y,g),!s.__e&&s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(y,s.__s,g)===!1||e.__v===t.__v){s.props=y,s.state=s.__s,e.__v!==t.__v&&(s.__d=!1),s.__v=e,e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(C){C&&(C.__=e)}),s.__h.length&&c.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(y,s.__s,g),s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(p,l,d)})}s.context=g,s.props=y,s.state=s.__s,(f=h.__r)&&f(e),s.__d=!1,s.__v=e,s.__P=n,f=s.render(s.props,s.state,s.context),s.state=s.__s,s.getChildContext!=null&&(i=k(k({},i),s.getChildContext())),m||s.getSnapshotBeforeUpdate==null||(d=s.getSnapshotBeforeUpdate(p,l)),T=f!=null&&f.type===D&&f.key==null?f.props.children:f,B(n,Array.isArray(T)?T:[T],e,t,i,r,o,c,a,u),s.base=e.__e,e.__h=null,s.__h.length&&c.push(s),w&&(s.__E=s.__=null),s.__e=!1}else o==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=re(t.__e,e,t,i,r,o,c,u);(f=h.diffed)&&f(e)}catch(C){e.__v=null,(u||o!=null)&&(e.__e=a,e.__h=!!u,o[o.indexOf(a)]=null),h.__e(C,e,t)}}function K(n,e){h.__c&&h.__c(e,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(i){i.call(t)})}catch(i){h.__e(i,t.__v)}})}function re(n,e,t,i,r,o,c,a){var u,f,s,m=t.props,p=e.props,l=e.type,d=0;if(l==="svg"&&(r=!0),o!=null){for(;d<o.length;d++)if((u=o[d])&&"setAttribute"in u==!!l&&(l?u.localName===l:u.nodeType===3)){n=u,o[d]=null;break}}if(n==null){if(l===null)return document.createTextNode(p);n=r?document.createElementNS("http://www.w3.org/2000/svg",l):document.createElement(l,p.is&&p),o=null,a=!1}if(l===null)m===p||a&&n.data===p||(n.data=p);else{if(o=o&&q.call(n.childNodes),f=(m=t.props||P).dangerouslySetInnerHTML,s=p.dangerouslySetInnerHTML,!a){if(o!=null)for(m={},d=0;d<n.attributes.length;d++)m[n.attributes[d].name]=n.attributes[d].value;(s||f)&&(s&&(f&&s.__html==f.__html||s.__html===n.innerHTML)||(n.innerHTML=s&&s.__html||""))}if(oe(n,p,m,r,a),s)e.__k=[];else if(d=e.props.children,B(n,Array.isArray(d)?d:[d],e,t,i,r&&l!=="foreignObject",o,c,o?o[0]:t.__k&&S(t,0),a),o!=null)for(d=o.length;d--;)o[d]!=null&&H(o[d]);a||("value"in p&&(d=p.value)!==void 0&&(d!==m.value||d!==n.value||l==="progress"&&!d)&&L(n,"value",d,m.value,!1),"checked"in p&&(d=p.checked)!==void 0&&d!==n.checked&&L(n,"checked",d,m.checked,!1))}return n}function Q(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(i){h.__e(i,t)}}function X(n,e,t){var i,r;if(h.unmount&&h.unmount(n),(i=n.ref)&&(i.current&&i.current!==n.__e||Q(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){h.__e(o,e)}i.base=i.__P=null}if(i=n.__k)for(r=0;r<i.length;r++)i[r]&&X(i[r],e,typeof n.type!="function");t||n.__e==null||H(n.__e),n.__e=n.__d=void 0}function se(n,e,t){return this.constructor(n,t)}function R(n,e,t){var i,r,o;h.__&&h.__(n,e),r=(i=typeof t=="function")?null:t&&t.__k||e.__k,o=[],U(e,n=(!i&&t||e).__k=_(D,null,[n]),r||P,P,e.ownerSVGElement!==void 0,!i&&t?[t]:r?null:e.firstChild?q.call(e.childNodes):null,o,!i&&t?t:r?r.__e:e.firstChild,i),K(o,n)}q=F.slice,h={__e:function(n,e){for(var t,i,r;e=e.__;)if((t=e.__c)&&!t.__)try{if((i=t.constructor)&&i.getDerivedStateFromError!=null&&(t.setState(i.getDerivedStateFromError(n)),r=t.__d),t.componentDidCatch!=null&&(t.componentDidCatch(n),r=t.__d),r)return t.__E=t}catch(o){n=o}throw n}},I=0,ee=function(n){return n!=null&&n.constructor===void 0},N.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=k({},this.state),typeof n=="function"&&(n=n(k({},t),this.props)),n&&k(t,n),n!=null&&this.__v&&(e&&this.__h.push(e),W(this))},N.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),W(this))},N.prototype.render=D,x=[],$=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,E.__r=0,te=0;var ie="https://salty-ocean-46227.herokuapp.com";function le(n,e){return`https://${n}.fandom.com/wiki/${e}`}var J=class extends N{constructor(e){super(e);this.state={showRows:!0}}render(){let e=this.props.aside;if(!e)return null;let t=this.props.parser,i=[];if(!!!e.querySelector("figure"))return null;let o=t.text(e.querySelector("h2")),c=t.imgsrc(e.querySelector("figure").querySelector("img").src);for(let a of e.querySelectorAll("div.pi-item")){let u=t.parseNode(a.children[0]),f=t.parseNode(a.children[1]);i.push(_("tr",null,_("td",null,u),_("td",null,f)))}return _("aside",null,_("h2",null,o),_("div",null,_("img",{src:c})),_("div",{onClick:()=>{this.setState({showRows:!this.state.showRows})}},_("button",null,this.state.showRows?"Hide":"Show")),this.state.showRows?_("table",null,i):null)}};var Z=class{constructor(e,t){this.raw_text=e,this.wiki=t;let i=new DOMParser;this.html=i.parseFromString(e,"text/html")}qs(e){return this.html.querySelector(e)}text(e){return e?e.innerText.trim():(console.error("unknown el"),"-")}title(){return this.text(this.qs(".page-header__title"))}imgsrc(e){return e.split("/revision/")[0]}aside(){let t=this.qs("div.mw-parser-output").querySelector("aside");return _(J,{aside:t,parser:this})}toc(){let e=this.qs("#toc");if(!e)return null;let t=[],i=(r,o)=>{for(let c of r.children){let a=c.children[0],u=this.text(a.querySelector(".toctext"));t.push(_("div",{style:{marginLeft:`${20*o}px`}},_("a",{href:`#${encodeURI(u)}`},this.text(a))));let f=c.querySelector("ul");f&&i(f,o+1)}};return i(e.querySelector("ul"),0),_("div",{className:"toc"},t)}stripSuffix(e,t){return e.endsWith(t)?e.slice(0,-t.length):e}parseNode(e){let t=[],i={SMALL:"small",B:"b",I:"i",P:"p",SPAN:"span",TABLE:"table",THEAD:"thead",TBODY:"tbody",TR:"tr",CENTER:"center",FONT:"font",STRONG:"strong",ASIDE:"aside",SECTION:"section"};for(let r of e.childNodes){if(i[r.nodeName]){let o=`${i[r.nodeName]}`;t.push(_(o,null,this.parseNode(r)));continue}if(r.nodeName==="A"){let o=r.href;if(r.href.startsWith(window.location.origin)){let c=r.href.split("/wiki/")[1];o=`${window.location.origin}/?p=${this.wiki}/${c}`}t.push(_("a",{href:o},this.parseNode(r)))}else if(r.nodeName==="#text")r.textContent.trim()!==""&&t.push(_("span",null,r.textContent));else if(r.nodeName!=="SUP")if(r.nodeName==="BR")t.push(_("br",null));else if(r.nodeName==="DL")t.push(this.blockquoteFromDl(r));else if(r.nodeName==="H2"){let o=this.stripSuffix(this.text(r),"[]");t.push(_("h2",{id:encodeURI(o)},o))}else if(r.nodeName==="H3"){let o=this.stripSuffix(this.text(r),"[]");t.push(_("h3",{id:encodeURI(o)},o))}else if(r.nodeName==="H4"){let o=this.stripSuffix(this.text(r),"[]");t.push(_("h4",{id:encodeURI(o)},o))}else if(r.nodeName==="BLOCKQUOTE"){let o=this.parseNode(r.querySelector("i")),c=this.parseNode(r.querySelector("cite"));t.push(_("blockquote",null,o,_("cite",null,_("small",null,c))))}else if(r.nodeName==="DIV"){let o=r.querySelector("dl");o?t.push(this.blockquoteFromDl(o)):t.push(_("p",null,this.parseNode(r)))}else if(r.nodeName==="FIGURE"){let o=r.querySelector("a").href.split("/revision/")[0],c=this.text(r.querySelector("figcaption"));t.push(_("figure",null,_("img",{src:o}),_("figcaption",null,_("span",null,c))))}else if(r.nodeName==="UL")t.push(this.parseList(r,"ul"));else if(r.nodeName==="OL")t.push(this.parseList(r,"ol"));else if(r.nodeName==="IMG")if(r.getAttribute("data-src")){let c=this.imgsrc(r.getAttribute("data-src"));t.push(_("img",{src:c}))}else t.push(_("img",{src:r.src}));else r.nodeName==="TD"?t.push(this.parseTableCell(r,"td")):r.nodeName==="TH"?t.push(this.parseTableCell(r,"th")):r.nodeName==="NOSCRIPT"||(console.log("Unknown node:",r.nodeName),t.push(_("span",null,r.innerText)))}return t}parseTableCell(e,t){return _(t,{style:{background:e.style.background},rowspan:e.getAttribute("rowspan"),colspan:e.getAttribute("colspan")},this.parseNode(e))}parseList(e,t){let i=t,r=[];for(let o of e.querySelectorAll("li"))r.push(_("li",null,this.parseNode(o)));return _(i,null,r)}blockquoteFromDl(e){let t=this.parseNode(e.children[0]),i=this.parseNode(e.children[1]);return _("blockquote",null,t,_("cite",null,i))}sections(){let e=this.qs("div.mw-parser-output"),t=!1,i=[];e.querySelector("#toc")||(t=!0);let r=[];for(let o of e.children)t&&r.push(o),o.id==="toc"&&(t=!0);return this.parseNode({childNodes:r})}headParagraphs(){let e=this.qs("div.mw-parser-output");if(!e.querySelector("#toc"))return null;let t=[];for(let r of Array.from(e.childNodes)){if(r.id==="toc")break;r.nodeName==="ASIDE"||r.nodeName==="DIV"&&r.querySelector("aside")||(r.nodeName!=="DL",t.push(r))}let i=this.parseNode({childNodes:t});return _("div",null,i)}};async function _e(){let n=new URL(window.location.href),e=n.searchParams.get("p"),t=null,i=null;if(e){let u=e.split("/");if(u=u.map(f=>f.trim()).filter(f=>f!=""),u.length!=2){alert(`Expected to parts to the path: <wiki>/<page>, instead found ${u}`);return}[t,i]=u}else i=n.pathname.split("/").slice(-1)[0],t=n.pathname.split("https://")[1].split(".")[0];R(_("div",null,"Loading '",i,"' from '",t,"'"),document.body);let r=le(t,i),c=await(await fetch(`${ie}/${r}`)).text(),a=new Z(c,t);document.title=a.title(),R(_("div",null,_("a",{href:r},"origin"),_("h1",null,a.title()),_("p",null,a.aside()),_("p",null,a.headParagraphs()),_("p",null,a.toc()),_("p",null,a.sections())),document.body),sessionStorage[i]&&window.scrollTo(0,sessionStorage[i]),window.onscroll=()=>{sessionStorage[i]=window.scrollY}}_e();})();
